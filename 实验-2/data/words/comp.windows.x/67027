yang hong yang subject colormap question hi expert kind new x follow question strange try modify content colormap fail without reason use follow piece code toplevel xtinitialize argv testcolor null argc argv dpy xtdisplay toplevel scr defaultscreen dpy defaultcolormap dpy scr xalloccolorcells dpy true null cell cell dored dogreen doblue xstorecolor dpy color printf n try allocate color xquerycolor dpy color printf n allocate color else printf n error could allocate color cell run output try allocate color allocate color xstorecolor xquerycolor return original value display content colormap obvious unchanged also try draw line use color turn unmodified color problem modify content colormap appreciate please send mail yang william email yang way follow environment use output xdpyinfo show default visual pseudocolor version number vendor string decwindows digitalequipmentcorporation vendor release number maximum request size longwords byte motion buffer size bitmap unit bite order pad lsbfirst image byte order lsbfirst number support pixmap format support pixmap format depth depth keycode range minimum maximum number extension adobe-dps-extension dpsextension shape mit-shm multi-buffering xinputextension mit-sundry-nonstandard dec-xtrap default screen number number screen screen dimension pixel millimeter resolution dot per inch depth root window id depth root window plane number colormaps minimum maximum default colormap default number colormap cell preallocated pixel black white option backing-store yes save-unders yes current input event mask keypressmask buttonpressmask buttonreleasemask enterwindowmask substructureredirectmask propertychangemask colormapchangemask number visuals default visual id visual visual id class pseudocolor depth plane size colormap entry red green blue mask significant bite color specification bite visual visual id class grayscale depth plane size colormap entry red green blue mask significant bite color specification bite visual visual id class staticgray depth plane size colormap entry red green blue mask significant bite color specification bite visual visual id class staticcolor depth plane size colormap entry red green blue mask significant bite color specification bite visual visual id class truecolor depth plane size colormap entry red green blue mask significant bite color specification bite number mono multibuffer type visual id max buffer depth visual id max buffer depth visual id max buffer depth visual id max buffer depth visual id max buffer depth number stereo multibuffer type 