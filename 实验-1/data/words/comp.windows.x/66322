from peter subject frequently question version id v exp the x toolkit intrinsics monthly post this the to some frequently question from the x toolkit intrinsics to submit question with send to include this one on the site in the directory the under which be in the line the top of the this be code public content xt version why doe my core dump when i use how do i use different the which should use why do only shell widget which depth do shell inherit i do the i still get error why why doe my widget get destroy when i xtdestroywidget how do i exit but still execute the how do i shell widget why file good book there on xt widget to the intrinsics there how do i to how do i write resource converter how do i open multiple from to to where the resource from order execute in how do i know if widget be visible how do i widget in xt why use xtfree etc how to debug xt why do work be how i implement drop xt o the xt intrinsics implement object orient to c code to useful component to be include with this provide the object rectobj core composite shell overrideshell wmshell etc the term xt intrinsics use however they use very precisely to specific of the x window system in it doe not include the motif olit or other widget set without further widget the intrinsics not useful o widget refer to user xt the precise use be object be of the core it be use loosely to refer to be of the object these more windowless widget or o xlib be the c to the protocol it be one below the xt intrinsics widget us few xlib function xt provide most such service of xlib help with problem version the follow the version of xt version next expect none widget see motif olit xw none xcu none fwf b lewis uunet the on x it be post monthly on on export in r e quin lee post list on open look to post list on motif to peter post list for it be on export in why doe my core dump when i use in brief xlib xt most widget set no exclusion for section interrupt be likely to one of the in inconsistent such the not yet set pointer in the middle of list etc note the c point out of be undefined if the function other itself so this be not problem specific to xlib xt the posix mention other function which be but it not be these function by xlib or xt function the only to with be to set in the interrupt this need to be check either by work procedure or timeout it be incorrect to either of these in the interrupt note it be to work procedure never finish this effectively preempt work procedure previously so they will never be option be to open pipe tell the event loop the end use then the write byte to the write end of the pipe for however this could your process if the pipe fill up why do the intrinsics with this problem it be suppose to be to system be good enough i do think so note the in the x the in volume in error how do i use different the this require more it should window three thing specific the border widget their own resource only shell widget resource question with why shell the of these resource be which doe it in the shell widget get when one of the three resource be not properly set error occur when the window be they not properly set of the depend on the be use how to get this to work there two to the the first be if you to with the second be if you shell within to with different the second be the you need be the first be little you need to much of the toolkit yourself in order to determine the need some code to up use something other the to compile cc g o lxmu lxt lxext lm to run geometry depth fg blue bg yellow you need to move the mouse to get the to include include include typedef struct int depth optionsrec optionsrec option xtresource resource xtoffsetof optionsrec null depth depth xtrint int xtoffsetof optionsrec depth null xrmoptiondescrec desc null depth depth null int int the context widget top toplevel widget dpy vector int count vinfo for find return list of int count number of only cnt test test the line bcopy the follow dummy toplevel widget so we retrieve the resource cnt top desc xtnumber desc string null cnt dpy top cnt top option resource xtnumber resource cnt cnt if xtscreen top cnt cnt now we we could use on the of the we could some property on the rootwindow to find the right we could do sort of thing dpy rootwindowofscreen xtscreen top cnt cnt now find some the dpy vinfo count if count cnt xtndepth depth cnt xfree xpointer xtdestroywidget top now the toplevel widget cnt cnt cnt cnt top null dpy cnt the loop event top return which should use this be point be but one opinion be there be no for to know the it to be specify by the user if you with this then your into the of use the or it be specific expect some such truecolor with extension or some such why no run in depend on the server resource i not your to run in truecolor mode if it be go to mess up my other i be very upset if it choose to run in of psuedocolor or just monochrome on low end color sun server there different possible monochrome entry color truecolor the sgi iris offer the plus bite truecolor bite truecolor why do only shell widget this be strictly by convention it it possible for widget to know the it us be find by look for the shell widget be it the of shell widget it own resource if it doe it must it own method to use the when it you should this resource be with so other widget find it be which depth do shell inherit the for these resource set to this be interpret the the of the screen if the widget no it be the root of your widget tree if the of the widget be not null then the shell copy depth from it us the i do the i still get error why some resource converter improperly reference this true of version of motif why doe my widget get destroy when i xtdestroywidget see section of the xt it doe get destroy just not the intrinsics destroy widget in process first it of it child set it be be destroy it be then put on list of widget to be destroy this pending x event or further reference to widget be up before the memory be free the second be then perform event complete before check for the next x event this point the list be widget memory be free other thing some further the widget be destroy if the intrinsics determine they no further reference to the widget on the list if so then the destruction occur if nest event loop use widget on the destroy list before enter the inner event loop not destroy until return to the outer event loop how do i exit but still execute the the problem be if simple entirely to exit be use such exit directly then widget not to up such open socket file x resource etc this code for simplicity only single toplevel widget widget toplevelget gw widget gw widget to find toplevel widget top for top gw top top top empty return top void gw closure widget gw widget xtpointer closure the specify xtpointer widget specific widget toplevel toplevel toplevelget gw toplevel it quickly xtdestroywidget toplevel exit one see the code exit destroy the toplevel widget the trouble be the destruction never occur this work for most widget most but will not work for those widget you might think since it work now it will work but remember of the object orient be use be so one be of the for widget which the widget require some be up by the destroy one be to modify to set then test for in event loop however event loop frown upon it tend to sloppy difficult to try the follow code include extern widget toplevelget if needfunctionprototypes widget gw endif extern exitworkproc if needfunctionprototypes xtpointer closure endif extern void if needfunctionprototypes widget gw xtpointer closure xtpointer endif widget toplevelget gw widget gw widget to find toplevel widget top for top gw top top top empty return top void gw closure widget gw widget xtpointer closure the specify xtpointer widget specific widget toplevel toplevel toplevelget gw toplevel it quickly xtdestroywidget toplevel gw exitworkproc xtpointer null exitworkproc closure xtpointer closure exit work procedure will get when the be next idle which the event process the destroy execute how do i shell widget it be one doe shell widget the proper thing be to the currently child of the shell widget use the geometry be then to the shell which the window which or not the request however the shell must the resource set to true otherwise it will not even the window to the request the shell will not to the position of shell use on the shell not the child within the limit of the window it should be why file it doe however unix for when be for file doe not fit most people intuitive model in unix term file descriptor be for whenever the would not block ignore the set of not to block this work expect for socket pipe for file the will return but the return eof no more the result be the code in the intrinsics the input it think something be to be the culprit be the select system or on sysv o it be the poll system how to get this on unix system the best be to use process to check for input on the file use pipe to connect the with this other process the file descriptor from the pipe to on bsd system be f it rumor select on some system be not completely in ibm this be one where it would work for while time then stop until some other event wake it up this seem to be the result of condition in the kernel ibm to fix for this doe work ultrix possibly others where pipe implement socket completely break but the write side write in byte block the side receive it break up if it be put into the pipe byte time you lot of time by block get it by detect the select ignore the pipe for mseconds by then it be give the whole block note the description use unix terminology such file descriptor pipe etc this be o dependent not be on system however the intrinsic designer felt it common enough it should be include with of the toolkit why they do with this point i do know good book there on xt i be the definitive reference to my perspective it offer introduction but go into the full of the intrinsics when i use it i with xt the concept behind it so newcomer or not find it useful i find it complete which it j swick r x window system toolkit the complete guide press isbn order number by isbn through dec direct the other book i commonly recomend to novice be young doug the x window system with xt motif version prentice isbn isbn of course entire series of on x xt order be in volume be xt reference do in style the edition be extensively go beyond the mit i find it very useful in the permutted index reference to other help in down i two the x resource the the x these the only two with x the x resource be publish by with one of the issue be the mit x consortium conference proceed there be no i find it with pretty good depth for order or for of content post in in tex form on in in form the x be bimonthly with lot of the orient le i it more to see go on then with of but remember i represent of people they pretty good collection of people on the columnist widget there three widget set the set provide with this be sufficient for most purpose but be on the ugly side recently look be for ftp on motif from osf for license fee commonly ship on vendor everyone but sun it look good work well but i think it be poorly implement olit the open look intrinsics toolkit be set of widget implement sun open look develop by t i never use it so comment on it i rumour it be to get in the follow collection of widget of widget for from technology it include line pie xy plot hypertext help entry form widget i never see them so i comment fwf the free widget be to collect set of freely widget include editor few others the current set of widget be ftp from the in the file xcu the cornell university widget from gene dyke one of the widget set provide nice for button mini not so widely use x the sony widget set this during but seem to it look like it promise xw the hp widget the precursor to motif write for there exist diffs to get it to work under pretty good widget set but more or le die the precursor to this the toolkit which implement for provide much experience for the designer of xt xo widget set i work on it still primitive but you give it try in the follow widget tbl implement of widget support motif widget child of wcl plot the plot widget not the widget gnb or joe to the intrinsics there vendor xview c sun oi c interview c c however much i like c the skill in both design implement the intrinsics hopefully some will develop in the next us object orient keep your eye open expect some the time other c how do i to first be go wrong be the structure for be typdef struct string long the code to you see with c type conversion the get the integer of the point when the be copy into the widget resource the bite be wildly different require for point so how to get this the follow be from the widget document i now recomending it over the previous suggestion define n d if n d else ld d n ld how do i write resource converter courtesy of rich thomson rthomson the follow discussion of resource converter or intrinsics resource converter between to for destructors of convert there type of resource converter string to type type to string type to type i string to type string to type converter fix set of string will be convert to type this be most often use to to true in this the string to type converter need to the resource to the list of fix string this be most by the use of the of the resource the resource be turn into which be unique of the string fit into single word then the resource be the for the fix string represent the if there string in the converter or converter with number of string then routine might be use to turn the resource string into the first time one of these converter be use the string will be turn into hold in for use in the next of one of the converter ii type to string this type of converter be slightly the string to type converter since the use of be the type be simply convert to string by the use of sprintf type to string converter useful for wish to convert type into string so they write out resource to file this be use to provide of into file this be use to restore the to know the x resource if you the trouble to write string to type converter it be much effort to write the type to string converter write both the time help to ensure they consistent iii type to type this type of converter be use to convert exist type to type for x pixel be convert to rgb type field for red green blue the type for resource converter be follow typedef xttypeconverter xtpointer dpy xtpointer when the converter be invoke the point to the source x resource the point to the x resource the be pointer to some converter-specific be specify when the converter be register the to be to the converter when it be invoke for the pixel to rgb structure converter discuss would need in which to lookup the pixel to the rgb correspond to pixel must be with the the follow type definition specify for convert typedef struct unsigned int when the converter be invoke the point to of the give for the convert or the be null in the former the converter should ensure the of the be enough to the convert if the be not enough then the converter should set the to the of need return the then ensure enough be reinvoke the converter if the be enough then the converter simply copy the convert into the give return true if the be null then the converter the to the of the convert return true when write group of converter this code be often it become convenient to define define do type if if type type return else type else type return true define donestr str if string string return else str string return true inside the converter it be good to perform little check on the to ensure your converter be be properly once you write your converter you need to register it with the intrinsics the intrinsics invoke resource converter when widget fetch their resource from the resource to register converter with single context use void context from to converter destructor context string from string to xttypeconverter converter xtdestructor destructor to register converter with context use xtsettypeconverter void xtsettypeconverter from to converter destructor string from string to xttypeconverter converter xtdestructor destructor in the intrinsics there be the routine these be supersede by xtsettypeconverter whenever possible the newer routine should be use when converter be register with the intrinsics specify how convert resource to be do convert convert convert on per convert require round-trip to the server be good for string to pixel conversion the destructor be routine be invoke then the resource be destroy either it reference count be decremented to or the widget own the be be destroy xtdestructor the follow type definition typedef void xtdestructor xtpointer context to xtpointer the destructor be invoke to free with the to but doe not free the point to by the to itself to the destructor be the be to the converter when the conversion perform for for the string to pixel converter since the destructor would need to free the pixel from the well the in when the converter register converter code be find in the follow file in the mit distribution how do i open multiple see multi-user use xt the x resource issue summer by oliver jones for complete of the issue involve most of this be on in nutshell one us to to single context then to shutdown remove it from the context the problem occur when try to close down this user select quit button on one of the user window send server disconnect possibly from killclient server or network i you with since it be merely problem of widget to remove if not then the oliver jones the third one be difficult to the follow be on the oliver jones i include it here it be difficult problem the difficulty the xlib design presume error be so this be true for single x but not true for multiple or doe thing other on x server when x error occur the error be if it return then exit the only this be to use to return to the error the follow code this include xiorecover void dpy dpy dpy longjmp xiorecover if setjmp xiorecover the be something give pointer go to the specific perform it should for those of you with when setjmp be first it return enough in the execution of longjmp return the to the if the setjmp just execute the return of this second setjmp be the of the second to longjmp there use these but for this purpose it be some other problem you might run into resource converter improperly resource the most likely symptom xlib error such or there be problem with the number of you open since only limit number of file descriptor with be you run into problem when try to connect to there much discussion in this topic in november of robert scheifler post which this be the it will be xlib will not from to to this only in the intrinsics first the for describe then incomplete list of new function others now list brevity be much of the follow be retrieve from of the mit xt intrinsics from volume edition from to of windowless widget new resource type converter to list define with this count event to type from to type from to extension record obsolete info be to to extension record obsolete info be to xtquerygeometry must store complete geometry work under from to psuedo resource for other file more flexible resource per-screen resource support string string require for field the to be from to int improvement this be from the xt improvement in by beged-dov in the x resource issue with to string copy field in the record need string use of string for resource list redesign to use le memory redesign rewrite so it le memory merge of bind keycode to keysyms better of gc with field window to widget us le doe not for widget since be widget be to include the over reduction in memory function new with gc with field get the of return resource for screen register procedure to set function new with procedure to before every lot of work decrement reference count for converter specify resource register new style converter directly execute list invoke new style converter resource list of resource find resource converter xtdirectconvert invoke old-style converter return the issue conversion xtfindfile find file retrieve keysym modify for this return get for widget return keycode-to-keysym xtgetmulticlicktime the multi-click time xtgetselectionrequest retrieve the selectionrequest event the selection the selection widget register event others register event without modify input xtisobject test if of object xtisrectobj test if of rectobj xtkeysymtokeycodelist return list of keycodes retrieve most recent event time xtmenupopdown for pop down widget xtmenupopup for pop up widget xtoffsetof for structure offset selection popup procedure need remove function every find file xtscreenofobject return screen of object xtsetmulticlicktime set the multi-click time set for custom button key pointer to bunch of function xtwindowofobject return window of widget when xtconvert xtdestroygc xterror xtgetselectiontimeout menupopdown xtmenupopdown menupopup xtmenupopup xtnextevent xtpeekevent xtpending xtsetselectiontimeout where the resource from the resource of widget fill in from the follow from highest priority to lowest priority time line user per host file user file user per file system wide per file note only once on the result of step be single resource use for further query the per host file for execute on specific computer this file be either specify with the xenvironment environment or if be not set then the file host be use the user file be either from the property on the root window of the or if be not set then the file be use the xrdb be use to set the property note this should be keep client connect to the must the property of be some toolkits to the but most do not user per file specific to the intrinsics quite flexible on how this file be find the next describe the environment how they effect where this file be find the system wide per file find in if such file be not find then the resource use the intrinsics quite flexible on how this file be find the next describe the environment how they effect where this file be find to oliver jones oj for the follow you use environment to control how resource for your these environment control where xt look for file be xt most one file from the define in from the define in set if be on your system in such file in different directory suppose for you run sun open window you some x in you could set like this for it would xt to look up file in both or wherever your openwinhome be setenv t n t n the of this environment be list of the follow see n the of the or the t the of the file type in this the string c resource only s suffix none for l codeset l of l t the territory of the string c the codeset of the string let the suppose the be myterm suppose open window be in notice the omit lookup t n t n the xt try to open both of the file in the order show soon it find one it it us it stop look for others the effect of this be to first in then in let consider this time let set so it look for the file in the current work directory then for myterm in the directory setenv n the first in the list to the second to this be convenient set for debug it follow the convention of the file in the source directory so you run the from the directory in which you work still the resource properly note when look for file with for some neither the type nor file suffix be define so t s useless with there twist you specify resource for you might run the myterm like this myterm xrm color if one of your the n c then the would be the c substitution on the of the resource the compile into xt be l t n c l t n c t n c l t n l t n t n note some site with projectroot in this of set the compile into xt be root l n c root l n c root n c root l n root l n root n root be either the of or the user home directory if be not set if you set to some other the xt ignore notice the quick dirty of your find your file in your current work directory be to set to single dot in this work differently for people set their to dot follow by order execute in courtesy of converse converse the intrinsics do not order this be both the widget writer the writer the to modify the entire content of the list neither one currently know the other be do so the intrinsics not the order of execution the not rely on the widget writer the widget writer be not require to document when the widget will remove from the list or effect this will therefore the in should be independent of the in other on the list even though the xt in the definition of specify the list to which the procedure be to be you not infer from the word the routine in the order they be to the list how do i know if widget be visible courtesy of converse converse i build widget need to know if it be visible i set the visible interest field in core if my window be completely obscure the core visible go however if my window be iconified the set to true right everything be implement correctly this deficiency in the x protocol the core widget be reflect the of the protocol the deficiency be the be in one in this inconvenient the xt be in the second third of section so this section the visible field will not in response to visibilitynotify event will not be receive when the window go from to be when the widget or be be when occur this be the protocol deficiency visibility specific in the x protocol see the in your xlib x protocol reference be this problem with mwm or be there something else which need to be do you see this with window with no window if the problem be mwm be the to determine if window be iconified writer keep with in routine with for on the shell widget which your custom widget the custom widget writer see the field return by to these suggestion how do i widget in xt you why use xtfree etc most code or tend to ignore the possibility of return null best it be something like ptr type type if ptr perror in exit to this common the intrinsics define the function xtnew xtnewstring which use the c function but execute xterrormsg if null be return xt error not suppose to return so this effectively exit in if be with null pointer it us to get the this code like if ptr ptr type type else ptr type ptr type count count to be write ptr ptr ptr count xtfree null pointer i find the xt function to use however i i use the function so i fully recover from not enough memory error xtnew xtnewstring for structure or copy string struct ptr str xtnew struct of type ptr xtnewstring str strict of the intrinsics reference to provide function not with free code such ptr ptr free ptr not work i do this break to the vendor common error for motif be to use xtfree on string when they should be use xmstringfree how to debug xt first i recomend get purify from pure this be for memory problem on sun it bite pricey but i still recomend it excuse the blurb support for more info purify insert check instruction directly into the object code produce by exist compiler these instruction check every memory write perform by the under test detect type of error such memory write bind or write to free memory purify insert check logic into of the code in include third vendor object-code verify system in purify memory identify memory use novel of collection technique purify comprehensive memory check slow the down by of two to five be pricey for sun run on unix pretty be the sentinel debug environment this other c function to check for more info next if you get sort of xlib error you need to run in synchronous mode with the sync line or by set the xdebug to with your debugger then set point in exit this will let you to the xlib function be if you do run in synchronous mode then the error occur number of to xlib previously since the xlib buffer reply from the server next if you trouble with window you use the undocumented resource xtidentifywindows or the resource xtdebug to the widget to be identify with window for xrm true xwininfo tree click in new window will give the but the widget of window be include this help for check the of widget next if you trouble with geometry or you to test the widget it child you try this filter between child geometry check the of both it very clever the most problem be debug while the be execute of the or mouse such from pulldown menu the server effectively lock up you need to go to kill the debugger the server lock up the be debug no one else to the but the be not stop the debugger be for your you give them the input be go to your which be stop the best to debug this kind of problem be with two on your desk run the under debugger or other environment on one run the on the other possibly use sequence like this xhost setenv gdb your debugger or this xhost gdb gdb set environment gdb run i believe codecenter c debugger method of with this by explicitely the xlib function to during debug widget problem require pretty good debug skill knowledge of how widget work you go long without know the of widget but not very without how widget work judicious use of print with the debugger help why do work i get problem with the three routine the problem i be when i use them in my they seem not to be registred properly i little where everything work perfect but in my nothing the introduction in of the function obsoleted those routine see for other in be they use context different then the one you since event timeouts distribute on per context you use two context you wo get those event for cnt toplevel desc xtnumber desc cnt would never invoke the timeout be how i implement drop courtesy of roger reynolds rogerr feb be for move between client in intuitive motif version support openlook support d-n-d the two protocol not with other so i know they not publish i write rdd which be design to be flexible public protocol for do drop between client my intention to provide tool which would it for people to support protocol in the they develop contribute or sell of widget set be use long it be on xt the be upon my of the icccm convention for more the code i from of people use rdd who like it feel it work whole lot better motif stuff there seem to be who think it be but to use motif the rdd some other stuff be for ftp from in possibly older version be on in contrib pete ci dept ohio university w neil h columbus oh 